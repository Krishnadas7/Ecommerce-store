<%-include('../users/layouts/header.ejs')%>
   


<div class="signup-page">
  <section class="vh-100 bg-image">
    <div class="mask d-flex align-items-center h-100 gradient-custom-3">
      <div class="container h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-12 col-md-9 col-lg-7 col-xl-6">
            <div class="card border-0 shadow-lg">
              <div class="card-body">
                <h4 class="text-uppercase text-center">Create Your Account</h4>

                <%
                if (typeof message !== 'undefined') {
                %>
                <p style="color: rgb(255, 0, 0);"><%= message %></p>
                <%
                }
                %>

                <form action="/signup" method="post" onsubmit="return validateForm()">

                  <div class="form-outline mb-3 px-5">
                    <label class="form-label text-dark" for="form3Example1cg">Full Name</label>
                    <input type="text" id="name" class="form-control form-control-md" name="name" />
                    <span class="error-message" style="color: red;"></span>
                  </div> 

                  <div class="form-outline mb-3 px-5">
                    <label class="form-label text-dark" for="form3Example3cg">Your Email</label>
                    <input name="email" type="email" id="email" class="form-control form-control-md" />
                    <span class="error-message" style="color: red;"></span>
                  </div>

                  <div class="form-outline mb-3 px-5">
                    <label class="form-label text-dark" for="form3Example4cg">Enter your Mobile</label>
                    <input name="mobile" type="tel" id="mobile" class="form-control form-control-md" />
                    <span class="error-message" style="color: red;"></span>
                  </div>

                  <div class="form-outline mb-3 px-5">
                    <label class="form-label text-dark" for="form3Example4cg">Password</label>
                    <input name="password" type="password" id="password" class="form-control form-control-md" />
                    <span class="error-message" style="color: red;"></span>
                  </div>

                  <div class="form-outline mb-3 px-5">
                    <label class="form-label text-dark" for="form3Example4cg">Confirm Password</label>
                    <input name="confirmpassword" type="password" id="Cpassword" class="form-control form-control-md" />
                    <span class="error-message" style="color: red;"></span>
                  </div>
                  

                  <div class="d-flex justify-content-center px-5">
                    <button type="submit"
                      class="btn btn-primary text-success btn-block btn-md gradient-custom-4 text-body">Create Account</button>
                  </div>

                  <p class="text-center text-muted mt-3 mb-0">Have already an account? <a href="/login"
                      class="fw-bold text-body"><u>Login here</u></a></p>

                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
      const form = document.querySelector('form'); // Correct form selection
      const fnameInput = document.getElementById('name'); // Correct ID for the name input
      const emailInput = document.getElementById('email');
      const mobileInput = document.getElementById('mobile');
      const passwordInput = document.getElementById('password');
      const cpasswordInput = document.getElementById('Cpassword');
      const errorMessages = document.querySelectorAll('.error-message');

      form.addEventListener('submit', function (event) {
          event.preventDefault(); // Prevent form submission initially

          let isValid = true;
          errorMessages.forEach(function (element) {
              element.innerText = '';
          });

          if (fnameInput.value.trim() === '') {
              errorMessages[0].innerText = 'Name is required.';
              isValid = false;
          }

          // Add validation for the mobile input if needed

          if (emailInput.value.trim() === '') {
              errorMessages[1].innerText = 'Email is required.';
              isValid = false;
          }

          if (mobileInput.value.trim() === '') {
    errorMessages[2].innerText = 'Mobile is required.';
    isValid = false;
} else if (!/^\d{10}$/.test(mobileInput.value.trim())) {
    errorMessages[2].innerText = 'Mobile must contain exactly 10 digits and consist of only numbers.';
    isValid = false;
}



          if (passwordInput.value.length < 6) { // Correct password length check
              errorMessages[3].innerText = 'Password must be at least 6 characters long.';
              isValid = false;
          } else if (!/[^a-zA-Z0-9]/.test(passwordInput.value) || passwordInput.value.includes(' ')) {
              errorMessages[3].innerText = 'Password must contain at least one special character and cannot contain spaces.';
              isValid = false;
          }

          if (cpasswordInput.value === '') {
              errorMessages[4].innerText = 'Confirm Password is required.';
              isValid = false;
          }

          if (passwordInput.value !== cpasswordInput.value) {
              errorMessages[3].innerText = 'Passwords do not match.'; // Correct error message index
              errorMessages[4].innerText = 'Passwords do not match.';
              isValid = false;
          }

          if (isValid) {
              form.submit();
          }
      });

      // Real-time validation
      const inputElements = [fnameInput, emailInput, mobileInput, passwordInput, cpasswordInput];

      inputElements.forEach((input, index) => {
          input.addEventListener('input', function () {
              errorMessages[index].innerText = '';
          });
      });
  });
</script>






<%-include('../users/layouts/footer.ejs')%>